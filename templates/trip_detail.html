{% extends "base.html" %}
{% block title %}{{ trip.title }} â€” ÙˆØ¬Ù‡Ø© Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©{% endblock %}
{# === Ø¶Ø¹ Ù‡Ø°Ø§ Ø¨Ø¹Ø¯ extends ÙˆÙ‚Ø¨Ù„ block content === #}
{% block head_extra %}
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Product",
    "name": "{{ trip.title|e }}",
    "description": "{{ trip.summary|e }}",
    "image": [
      {% for img in trip.images %}
        "{{ url_for('static', filename=img, _external=True) }}"{{ "," if not loop.last }}
      {% endfor %}
    ],
    "brand": {
      "@type": "Organization",
      "name": "ÙˆØ¬Ù‡Ø© Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©"
    },
    "url": "{{ url_for('trip_detail', slug=trip.slug, _external=True) }}",
    "offers": {
      "@type": "Offer",
      "price": "{{ trip.price_per_day }}",
      "priceCurrency": "SAR",
      "availability": "https://schema.org/InStock",
      "url": "{{ url_for('trip_detail', slug=trip.slug, _external=True) }}",
      "eligibleRegion": "{{ trip.city|e }}",
      "itemCondition": "https://schema.org/NewCondition"
    }
  }
  </script>
{% endblock %}
{% block content %}
<section class="container">
  <nav class="breadcrumbs" style="display:flex;gap:6px;align-items:center;margin:8px 0 12px;">
    <a href="{{ url_for('home') }}">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a><span>â€º</span>
    <a href="{{ url_for('trips') }}">Ø§Ù„Ø±Ø­Ù„Ø§Øª</a><span>â€º</span>
    <span class="muted">{{ trip.title }}</span>
  </nav>

  <header class="page-head" style="margin:6px 0 12px;">
    <h1 class="page-title" style="margin:0 0 4px;">{{ trip.title }}</h1>
    <p class="muted" style="margin:0;">Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©: {{ trip.city }}</p>
  </header>

  <div class="cards" style="margin-top:10px;">
    {% for img in trip.images %}
    <article class="card">
      <img class="card__img"
        src="{{ url_for('static', filename=img) }}"
        alt="{{ trip.title }}"
        loading="lazy" decoding="async" width="960" height="640">
    </article>
    {% endfor %}
  </div>

  <div class="card" style="padding:16px; margin-top:16px;">
    <p style="margin:0 0 8px;">{{ trip.summary }}</p>
    <p class="muted" style="margin:0 0 12px;">
      Ø§Ù„Ø³Ø¹Ø± Ù„Ù„ÙŠÙˆÙ…: <strong>{{ trip.price_per_day }} Ø±.Ø³</strong>
      â€” Ø§Ù„Ø£ÙŠØ§Ù… Ø§Ù„Ù…Ù‚ØªØ±Ø­Ø©: <strong>{{ trip.days_default }}</strong>
    </p>
    <div class="card__actions" style="display:flex;gap:10px;flex-wrap:wrap;">
      <a class="btn btn--ghost" href="{{ url_for('trips') }}">Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø­Ù„Ø§Øª</a>
      <a class="btn btn--primary" href="{{ url_for('booking', trip=trip.slug) }}">Ø§Ø­Ø¬Ø² Ù‡Ø°Ù‡ Ø§Ù„Ø±Ø­Ù„Ø©</a>
    </div>
  </div>
</section>
{% if session.paid %}
  <a class="btn btn--ghost" href="{{ url_for('invoice_pdf') }}">ğŸ“„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙØ§ØªÙˆØ±Ø©</a>
{% endif %}
{% endblock %}