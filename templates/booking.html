{% extends "base.html" %}
{% block title %}نموذج الحجز{% endblock %}
{% block content %}
<h1 class="page-title">نموذج الحجز</h1>

<form class="form" method="post" id="bookingForm" novalidate
      data-trips='{{ trips|tojson }}'
      data-chosen="{{ chosen.slug if chosen }}">
  <div class="field">
    <label>الاسم الكامل</label>
    <input type="text" name="name" required placeholder="الاسم">
  </div>
  <div class="field">
    <label>البريد الإلكتروني</label>
    <input type="email" name="email" required placeholder="name@email.com">
  </div>
  <div class="field">
    <label>رقم الجوال</label>
    <input type="tel" name="phone" required placeholder="05xxxxxxxx">
  </div>

  <div class="field">
    <label>اختر الرحلة</label>
    <select name="trip" id="tripSelect" required>
      {% for t in trips %}
      <option value="{{ t.slug }}" {% if chosen and chosen.slug==t.slug %}selected{% endif %}>
        {{ t.title }} — {{ t.price_per_day }} ر.س / اليوم
      </option>
      {% endfor %}
    </select>
  </div>

  <div class="grid-2">
    <div class="field">
      <label>السعر لليوم</label>
      <input type="text" id="pricePerDay" readonly>
    </div>
    <div class="field">
      <label>عدد الأيام</label>
      <input type="number" name="days" id="days" min="{{ min_days }}" max="{{ max_days }}" value="1" required>
      <div class="hint">الحد الأدنى {{ min_days }} والحد الأقصى {{ max_days }} أيام</div>
    </div>
  </div>

  <div class="total">
    الإجمالي المتوقع <strong id="total">0</strong> ر.س
    <div class="muted">يتم تأكيد السعر النهائي في صفحة الدفع.</div>
  </div>

  <label class="checkbox">
    <input type="checkbox" id="agree" name="agree"> أوافق على
    <a href="{{ url_for('cancellation') }}" target="_blank">سياسة الإلغاء</a>
  </label>

  <button class="btn btn--primary" id="submitBooking" type="submit" disabled>إرسال الحجز</button>
</form>
{% endblock %}