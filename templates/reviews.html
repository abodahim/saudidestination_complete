{% extends "base.html" %}
{% block title %}آراء العملاء{% endblock %}

{% block header %}
<section class="header small">
  <h1>⭐ آراء العملاء</h1>
</section>
{% endblock %}

{% block content %}
<section class="section" style="display:grid;gap:18px;max-width:900px;margin-inline:auto">

  <article class="side-card">
    <h2 style="margin-top:0">أضف رأيك</h2>
    <form class="form" method="post" action="{{ url_for('reviews') }}">
      <div class="grid-2">
        <div>
          <label>الاسم</label>
          <input name="name" required>
        </div>
        <div>
          <label>التقييم</label>
          <select name="rating" required>
            <option value="" disabled selected>اختر</option>
            <option value="5">5 ⭐⭐⭐⭐⭐</option>
            <option value="4">4 ⭐⭐⭐⭐</option>
            <option value="3">3 ⭐⭐⭐</option>
            <option value="2">2 ⭐⭐</option>
            <option value="1">1 ⭐</option>
          </select>
        </div>
      </div>
      <label>تعليقك</label>
      <textarea name="comment" rows="4" required></textarea>
      <button class="btn mt-2" type="submit">إرسال التقييم</button>
    </form>
  </article>

  <article class="side-card">
    <h2 style="margin-top:0">التقييمات الأخيرة</h2>
    {% if reviews and reviews|length %}
      <ul class="list" style="display:grid;gap:12px;list-style:none;padding:0;margin:0">
        {% for r in reviews %}
          <li class="card" style="padding:14px">
            <div style="display:flex;justify-content:space-between;gap:10px;flex-wrap:wrap">
              <strong>{{ r[1] }}</strong>
              <span aria-label="تقييم {{ r[2] }} من 5">
                {% for _ in range(r[2]|int) %}⭐{% endfor %}
                {% for _ in range(5 - (r[2]|int)) %}☆{% endfor %}
              </span>
            </div>
            <p class="m-0 mt-1">{{ r[3] }}</p>
            <small style="color:#666">{{ r[4] }}</small>
          </li>
        {% endfor %}
      </ul>
    {% else %}
      <p>لا توجد تقييمات بعد.</p>
    {% endif %}
  </article>

</section>
{% endblock %}